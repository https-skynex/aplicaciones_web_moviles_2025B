# üß™ Gu√≠a de Prueba - Sistema Premium

## üöÄ Inicio R√°pido

### Opci√≥n 1: Probar con Usuario Premium Existente (Mar√≠a)

1. **Iniciar sesi√≥n:**
   ```
   Correo: maria@example.com
   Contrase√±a: maria123
   ```

2. **Verificar funcionalidades premium:**
   - ‚ú® Ver badge "PREMIUM" con estrellas en el saludo
   - üëë Men√∫ de usuario muestra "Gestionar Premium"
   - ü§ñ Bot√≥n flotante (+) tiene opci√≥n "ChatBot IA"

3. **Probar ChatBot:**
   - Click en bot√≥n flotante (+) esquina inferior derecha
   - Click en "ü§ñ ChatBot IA"
   - Escribir: "Analiza mis finanzas"
   - Ver respuesta con an√°lisis completo
   - Probar otras consultas:
     - "C√≥mo ahorrar m√°s"
     - "Revisa mis gastos"
     - "Plan de presupuesto"

---

### Opci√≥n 2: Activar Premium desde Usuario Free (Carlos)

1. **Iniciar sesi√≥n como usuario free:**
   ```
   Correo: carlos@example.com
   Contrase√±a: carlos123
   ```

2. **Verificar estado free:**
   - ‚ùå NO hay badge premium en saludo
   - ‚≠ê Men√∫ muestra "Hazte Premium" (bot√≥n morado)
   - ‚ùå Bot√≥n flotante NO tiene opci√≥n ChatBot

3. **Activar Premium:**
   - Click en foto de perfil (sidebar)
   - Click en "‚≠ê Hazte Premium"
   - **Seleccionar Plan:**
     - Mensual: $9.99/mes
     - Anual: $99.99/a√±o (recomendado, ahorra $19.89)
   
4. **Ingresar datos de tarjeta de prueba:**
   ```
   N√∫mero de tarjeta: 4242 4242 4242 4242
   Nombre titular: CARLOS RAMIREZ
   Fecha exp: 12/26
   CVV: 123
   ```

5. **Confirmar pago:**
   - Click en "Pagar $9.99 USD/mes" o "Pagar $99.99 USD/a√±o"
   - Esperar 2 segundos (simulaci√≥n de procesamiento)
   - Ver notificaci√≥n de √©xito
   - P√°gina recarga autom√°ticamente

6. **Verificar activaci√≥n:**
   - ‚úÖ Badge "PREMIUM" aparece en saludo
   - ‚úÖ Men√∫ ahora muestra "üëë Gestionar Premium"
   - ‚úÖ ChatBot disponible en bot√≥n flotante
   - ‚úÖ Notificaci√≥n de bienvenida en campanita üîî

---

## ü§ñ Pruebas del ChatBot

### Test 1: An√°lisis Financiero

**Entrada:** `Analiza mis finanzas`

**Resultado Esperado:**
```
üìä An√°lisis Financiero Actual:

üí∞ Balance General:
‚Ä¢ Ingresos totales: $XXXX.XX
‚Ä¢ Egresos totales: $XXXX.XX
‚Ä¢ Balance: $XXXX.XX ‚úÖ o ‚ö†Ô∏è

üìà Categor√≠a con m√°s gastos:
[Categor√≠a]: $XXXX.XX

‚úÖ Mensaje de felicitaci√≥n o ‚ö†Ô∏è Alerta
```

---

### Test 2: Estrategias de Ahorro

**Entrada:** `C√≥mo ahorrar m√°s`

**Resultado Esperado:**
```
üí° Estrategia de Ahorro Personalizada:

üéØ Meta de ahorro mensual: $XXX.XX (20% de tus ingresos)

üìù Recomendaciones:
1. Automatiza transferencias
2. Regla 50/30/20
3. Revisa suscripciones
4. Reduce gastos en [Categor√≠a]
```

---

### Test 3: An√°lisis de Gastos

**Entrada:** `Revisa mis gastos`

**Resultado Esperado:**
```
üìä An√°lisis de Gastos:

Total de egresos registrados: XX
Gasto promedio: $XXX.XX

‚ö†Ô∏è Gastos superiores al promedio:
‚Ä¢ [Descripci√≥n]: $XXX.XX
‚Ä¢ [Descripci√≥n]: $XXX.XX

üîç Categor√≠a dominante: [Categor√≠a] (XX% del total)
```

---

### Test 4: Plan de Presupuesto

**Entrada:** `Plan de presupuesto`

**Resultado Esperado:**
```
üìã Plan de Presupuesto Inteligente:

üè† Necesidades (50%): $XXX.XX
üé® Gustos (30%): $XXX.XX
üíé Ahorros/Inversiones (20%): $XXX.XX

‚úÖ Evaluaci√≥n del nivel de gasto actual
```

---

### Test 5: Reducir Gastos

**Entrada:** `Reducir gastos`

**Resultado Esperado:**
```
üí° Estrategias para Reducir Gastos:

1Ô∏è‚É£ M√©todo del Desaf√≠o de 30 d√≠as
2Ô∏è‚É£ Audita suscripciones
3Ô∏è‚É£ Planifica comidas
4Ô∏è‚É£ Usa la regla de las 24 horas
5Ô∏è‚É£ Enf√≥cate en [Categor√≠a con m√°s gastos]
```

---

### Test 6: Botones R√°pidos

**Acciones:**
1. Click en "üìä An√°lisis"
2. Click en "üí∞ Ahorro"
3. Click en "üîç Gastos"

**Resultado:** Input se llena autom√°ticamente con consulta predefinida

---

### Test 7: Historial Persistente

**Pasos:**
1. Enviar 3-4 mensajes al ChatBot
2. Cerrar el modal del chat
3. Abrir nuevamente el ChatBot
4. **Verificar:** Mensajes anteriores siguen presentes

---

### Test 8: Limpiar Historial

**Pasos:**
1. Click en bot√≥n üóëÔ∏è en header del chat
2. Confirmar en di√°logo
3. **Verificar:** Chat se reinicia con mensaje de bienvenida

---

## üé® Pruebas Visuales

### Test 1: Badge Premium

**Ubicaci√≥n:** Header del Dashboard (`¬°Hola, Mar√≠a!`)

**Verificar:**
- ‚úÖ Fondo plateado con gradiente
- ‚úÖ Icono ‚ú® a la izquierda
- ‚úÖ Texto "PREMIUM"
- ‚úÖ Icono ‚≠ê a la derecha
- ‚úÖ Animaci√≥n shimmer (brillo cada 3s)
- ‚úÖ Efecto shine (destello diagonal)

---

### Test 2: Modal de Suscripci√≥n

**Verificar:**
- ‚úÖ Fondo oscuro con blur
- ‚úÖ Modal con gradiente morado
- ‚úÖ Icono üëë con animaci√≥n pulse
- ‚úÖ Planes en grid (2 columnas desktop)
- ‚úÖ Badge "Recomendado" en plan anual
- ‚úÖ Beneficios listados con emojis
- ‚úÖ Formulario con validaci√≥n en tiempo real
- ‚úÖ Bot√≥n de pago con gradiente
- ‚úÖ Animaci√≥n de "Procesando..." al enviar

---

### Test 3: ChatBot Modal

**Verificar:**
- ‚úÖ Modal desde esquina inferior derecha
- ‚úÖ Header con gradiente morado
- ‚úÖ Avatar del bot con animaci√≥n float
- ‚úÖ Punto verde "online" pulsante
- ‚úÖ Mensajes del bot alineados a la izquierda
- ‚úÖ Mensajes del usuario alineados a la derecha
- ‚úÖ Animaci√≥n de typing (3 puntos)
- ‚úÖ Botones r√°pidos en footer
- ‚úÖ Input con auto-expand
- ‚úÖ Scroll suave a √∫ltimo mensaje

---

### Test 4: Men√∫ Premium en Sidebar

**Para usuario FREE:**
- ‚úÖ Bot√≥n "‚≠ê Hazte Premium" con gradiente morado
- ‚úÖ Hover aumenta brillo y mueve a la derecha

**Para usuario PREMIUM:**
- ‚úÖ Bot√≥n "üëë Gestionar Premium" con gradiente plateado
- ‚úÖ Hover aumenta brillo

---

## üîß Validaciones del Formulario

### Test de Tarjeta Inv√°lida

**Casos:**
1. **N√∫mero corto:**
   ```
   Input: 1234
   Error: "N√∫mero de tarjeta inv√°lido"
   ```

2. **Sin titular:**
   ```
   Input: ""
   Error: "Nombre del titular requerido"
   ```

3. **Fecha incorrecta:**
   ```
   Input: 13/25 (mes > 12)
   Error: "Fecha de expiraci√≥n inv√°lida"
   ```

4. **CVV corto:**
   ```
   Input: 12
   Error: "CVV inv√°lido"
   ```

---

### Test de Tarjetas V√°lidas

**Tarjetas de prueba:**

1. **Visa:**
   ```
   N√∫mero: 4242 4242 4242 4242
   Resultado: Detecta "Visa"
   ```

2. **Mastercard:**
   ```
   N√∫mero: 5555 5555 5555 4444
   Resultado: Detecta "Mastercard"
   ```

3. **American Express:**
   ```
   N√∫mero: 3782 822463 10005
   Resultado: Detecta "American Express"
   ```

---

## üì± Pruebas Responsive

### M√≥vil (< 640px)

**Modal Suscripci√≥n:**
- ‚úÖ Ocupa pantalla completa
- ‚úÖ Planes en una columna
- ‚úÖ Formulario en una columna
- ‚úÖ Scrollable

**ChatBot:**
- ‚úÖ Ocupa pantalla completa
- ‚úÖ Mensajes ocupan 80% del ancho
- ‚úÖ Botones r√°pidos hacen scroll horizontal

---

## üêõ Tests de Edge Cases

### Test 1: Usuario sin Transacciones

**Setup:** Crear usuario nuevo sin ingresos ni egresos

**ChatBot Input:** "Analiza mis finanzas"

**Resultado Esperado:**
- Balance: $0.00
- No hay categor√≠a dominante
- Mensaje informativo

---

### Test 2: Suscripci√≥n Vencida

**Setup (Consola):**
```javascript
const user = mockDB.users.find(u => u.correo === 'maria@example.com');
user.subscriptionEndDate = new Date('2023-01-01'); // Fecha pasada
mockDB.saveToLocalStorage();
location.reload();
```

**Verificar:**
- ‚ùå Badge no se muestra
- ‚ùå ChatBot no accesible
- ‚≠ê Men√∫ muestra "Hazte Premium"

---

### Test 3: Multiple Tabs

**Pasos:**
1. Abrir 2 pesta√±as con Mar√≠a logueada
2. En pesta√±a 1: Enviar mensaje al ChatBot
3. En pesta√±a 2: Abrir ChatBot
4. **Verificar:** Mensaje de pesta√±a 1 NO aparece (localStorage por tab)

---

## üéì Datos de Prueba

### Usuario Premium (Mar√≠a)

```javascript
{
  correo: "maria@example.com",
  contrase√±a: "maria123",
  isPremium: true,
  premiumSince: "2024-10-01",
  subscriptionType: "anual",
  subscriptionEndDate: "2025-10-01",
  paymentMethod: {
    type: "tarjeta",
    brand: "Visa",
    last4: "4242",
    expiry: "12/26"
  }
}
```

### Usuario Free (Carlos)

```javascript
{
  correo: "carlos@example.com",
  contrase√±a: "carlos123",
  isPremium: false,
  premiumSince: null,
  subscriptionType: null
}
```

---

## üìä M√©tricas de √âxito

### ‚úÖ Sistema Completo Funcional

- [ ] Usuario free puede activar premium
- [ ] Formulario valida correctamente
- [ ] Pago simula procesamiento
- [ ] Usuario se actualiza en mockDB
- [ ] Badge aparece despu√©s de pago
- [ ] ChatBot accesible solo para premium
- [ ] ChatBot analiza finanzas correctamente
- [ ] Historial de chat persiste
- [ ] Men√∫ premium cambia seg√∫n estado
- [ ] Notificaci√≥n de bienvenida se crea

---

## üîÑ Reset del Sistema

### Desactivar Premium de Mar√≠a

```javascript
const maria = mockDB.users.find(u => u.correo === 'maria@example.com');
maria.cancelarPremium();
mockDB.saveToLocalStorage();
location.reload();
```

### Limpiar Todo el Chat

```javascript
Object.keys(localStorage)
  .filter(k => k.startsWith('chatbot_'))
  .forEach(k => localStorage.removeItem(k));
location.reload();
```

### Reset Completo de Base de Datos

```javascript
localStorage.removeItem('finaizen_mockdb');
location.reload();
```

---

## üì∏ Capturas Esperadas

### Dashboard Premium
- Badge plateado con estrellas junto a "¬°Hola, Mar√≠a!"

### Modal de Suscripci√≥n
- Header morado con üëë
- 2 planes lado a lado
- Formulario de tarjeta
- Lista de beneficios

### ChatBot
- Modal desde esquina inferior derecha
- Avatar del bot con punto verde
- Mensajes en burbujas
- Botones r√°pidos en footer

---

## ‚ö†Ô∏è Problemas Comunes

### ChatBot no aparece

**Causa:** Usuario no es premium o suscripci√≥n vencida

**Soluci√≥n:** Verificar `currentUser.premiumActivo` en consola

---

### Badge no se muestra

**Causa:** Cach√© del navegador

**Soluci√≥n:** Ctrl+Shift+R para hard refresh

---

### Formulario no valida

**Causa:** Estado no se actualiza

**Soluci√≥n:** Verificar que `formData` tiene valores

---

### Chat no guarda historial

**Causa:** localStorage deshabilitado

**Soluci√≥n:** Permitir cookies/localStorage en configuraci√≥n del navegador

---

**Fecha de creaci√≥n:** Diciembre 2024  
**Versi√≥n:** 1.0.0  
**Autor:** Xavier
